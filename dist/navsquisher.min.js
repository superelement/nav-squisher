!function(){function init(el,_opts){if(!isInited(el)){var opts={liSel:"."+NS_LC+"-item",ulSel:"."+NS_LC+"-list",btnSel:"."+NS_LC+"-btn",btnInnerSel:"."+NS_LC+"-btninner",condition:!0};opts=mergeOptions(opts,_opts),el.classList.remove(CLS_NOJS),el.classList.add(NS_LC);var instanceID=NS_LC+"-"+incr,instance={id:instanceID,opts:opts};return instances[instanceID]=instance,el.setAttribute("data-id",instanceID),incr++,opts.condition?(setEvenWidths(el,opts),el.classList.add(CLS_IS_READY),instance):(el.classList.add(CLS_IS_READY),clearClasses(el),instance)}}function clearCalc(el,items){eachDom(items,function(item){item.removeAttribute("style")}),el.classList.remove(CLS_IS_CALC)}function setEvenWidths(el,opts){var items=el.querySelectorAll(opts.liSel),totalW=el.querySelector(opts.ulSel).offsetWidth;el.classList.add(CLS_IS_CALC),setEvenPadData(items,totalW);var perc,w,totPerc=0;eachDom(items,function(item){w=parseFloat(item.getAttribute("data-pixel-width")),"NaN"!==w.toString()?(perc=w/totalW*100,item.style.width=perc+"%",totPerc+=perc):console.warn(NS,"setEvenWidths","Attribute 'data-pixel-width' was not a valid number.",item)})}function setEvenPadData(items,totalW){var itemsW=getListWidth(items),extraW=totalW-itemsW,pad=extraW/items.length/2;eachDom(items,function(item){item.setAttribute("data-pixel-width",2*pad+item.offsetWidth)})}function getListWidth(items){var totalW=0;return eachDom(items,function(item){totalW+=item.offsetWidth}),totalW}function resize(el,doResetWidths){var instance=getInstance(el);if(instance){"undefined"==typeof doResetWidths&&(doResetWidths=!0);var items=el.querySelectorAll(instance.opts.liSel);clearCalc(el,items),doResetWidths&&(el.classList.remove(CLS_IS_READY),setEvenWidths(el,instance.opts),el.classList.add(CLS_IS_READY))}}function getInstance(el){var id=el.getAttribute("data-id");if(!id)return void console.warn(NS,"No attribute 'data-id' found. You probably haven't initialized the '"+NS+"' library yet on this element.",el);var instance=instances[id];return instance?instance:void console.warn(NS,"Something's not right. Couldn't find instance '"+id+"'.",el)}function isInited(el){var id=el.getAttribute("data-id"),instance=instances[id];return!!instance}function tightFit(textElList,doAddBreaks){eachDom(textElList,function(txtEl){newTxt="",brAdded=!1,txt=txtEl.textContent.trim(),txtSplit=txt.split(" "),txtEl.setAttribute(D_HTML_ORIG,txtEl.innerHTML.trim()),txtEl.setAttribute(D_TEXT_WITHOUT_BR,txt),txtSplit.forEach(function(char,i){newTxt+=char,i<txtSplit.length&&(brAdded||0===i&&char.length<4||txt.length<10?newTxt+=" ":(brAdded=!0,newTxt+="<br>"))}),txtEl.setAttribute(D_TEXT_WITH_BR,newTxt)}),setWordBreaks(textElList,doAddBreaks)}function setWordBreaks(textElList,doAddBreaks){eachDom(textElList,function(txtEl){var markup=txtEl.getAttribute(doAddBreaks?D_TEXT_WITH_BR:D_TEXT_WITHOUT_BR);txtEl.innerHTML=markup})}function eachDom(list,cb){for(var len=list.length,i=0;i<len;i++)cb(list[i])}function addClasses(el){eachDom(el.querySelectorAll("[data-add-class]"),function(el){var cls=el.getAttribute("data-add-class");cls&&el.classList.add(cls)})}function clearClasses(el,addThemBack){var instance=getInstance(el);if(addThemBack){el.classList.add(CLS_IS_CALC);var items=el.querySelectorAll("[data-li-sel]"),addCls=function(attr,thisEl,item){thisEl||(thisEl=(item||el).querySelector("["+attr+"]")),thisEl&&(thisEl.classList.add(thisEl.getAttribute(attr)),thisEl.removeAttribute(attr))};eachDom(items,function(item){item.style.width=item.getAttribute("data-width"),item.removeAttribute("data-width"),addCls("data-li-sel",item),addCls("data-btn-sel",null,item),addCls("data-btn-inner-sel",null,item)}),addCls("data-ul-sel")}else{el.classList.remove(CLS_IS_CALC);var items=el.querySelectorAll(instance.opts.liSel),addAttr=function(attr,sel,thisEl,item){thisEl||(thisEl=(item||el).querySelector(sel)),thisEl&&(thisEl.classList.remove(sel.slice(1)),thisEl.setAttribute(attr,sel.slice(1)))};eachDom(items,function(item){item.setAttribute("data-width",window.getComputedStyle(item,null).width),item.style.width="",addAttr("data-li-sel",instance.opts.liSel,item),addAttr("data-btn-sel",instance.opts.btnSel,null,item),addAttr("data-btn-inner-sel",instance.opts.btnInnerSel,null,item)}),addAttr("data-ul-sel",instance.opts.ulSel)}}function mergeOptions(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3}var NS="navSquisher",NS_LC="navsquisher",CLS_NOJS=NS_LC+"-nojs",CLS_IS_READY="is-ready",CLS_IS_CALC="is-calc",incr=0,instances={},D_TEXT_WITH_BR="data-text-with-break",D_TEXT_WITHOUT_BR="data-text-without-break",D_HTML_ORIG="data-html-original";window[NS]={init:init,isInited:isInited,resize:resize,tightFit:tightFit,setWordBreaks:setWordBreaks,addClasses:addClasses,clearClasses:clearClasses}}();